<div class="menu-header">
  <button (click)="goBack()" class="back-button" aria-label="Volver">
    <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-arrow-90deg-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1.146 4.854a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H12.5A2.5 2.5 0 0 1 15 6.5v8a.5.5 0 0 1-1 0v-8A1.5 1.5 0 0 0 12.5 5H2.707l3.147 3.146a.5.5 0 1 1-.708.708z"/>
    </svg>
  </button>
  <h1 class="menu-title">Recuperar Contraseña</h1>
</div>


<form (ngSubmit)="onSubmit()" [formGroup]="loginForm" class="contra-container">

  <!-- Correo electrónico -->
  <div class="container">
    <input id="email"
           type="email"
           formControlName="email"
           placeholder=" "
           required
           class="form__input"
           [ngClass]="{'input-error': loginForm.get('email')?.invalid && loginForm.get('email')?.touched}" />
    <label for="email">Correo electrónico</label>
  </div>
  <div *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched" class="error-msg">
    <small *ngIf="loginForm.get('email')?.errors?.['required']">El correo es obligatorio.</small>
    <small *ngIf="loginForm.get('email')?.errors?.['email']">Correo electrónico no válido.</small>
  </div>

  <!-- Nueva contraseña -->
  <div class="container">
    <input id="password"
           type="password"
           formControlName="password"
           placeholder=" "
           required
           class="form__input"
           [ngClass]="{'input-error': loginForm.get('password')?.invalid && loginForm.get('password')?.touched}" />
    <label for="password">Nueva Contraseña</label>
  </div>
  <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" class="error-msg">
    <small *ngIf="loginForm.get('password')?.errors?.['required']">La contraseña es obligatoria.</small>
    <small *ngIf="loginForm.get('password')?.errors?.['minlength']">Mínimo 8 caracteres.</small>
    <small *ngIf="loginForm.get('password')?.errors?.['pattern']">Debe contener mayúscula, minúscula, número y símbolo especial.</small>
  </div>

  <!-- Confirmar contraseña -->
  <div class="container">
    <input id="confirmPassword"
           type="password"
           formControlName="confirmPassword"
           placeholder=" "
           required
           class="form__input"
           [ngClass]="{
             'input-error': (loginForm.hasError('passwordsMismatch') && loginForm.get('confirmPassword')?.touched) ||
                           (loginForm.get('confirmPassword')?.invalid && loginForm.get('confirmPassword')?.touched)
           }" />
    <label for="confirmPassword">Confirmar Contraseña</label>
  </div>
  <div *ngIf="loginForm.hasError('passwordsMismatch') && loginForm.get('confirmPassword')?.touched" class="error-msg">
    <small>Las contraseñas no coinciden.</small>
  </div>
  <div *ngIf="loginForm.get('confirmPassword')?.invalid && loginForm.get('confirmPassword')?.touched && !loginForm.hasError('passwordsMismatch')" class="error-msg">
    <small>Confirmar contraseña es obligatorio.</small>
  </div>

  <!-- Botones -->
  <div class="button-group">
    <button type="submit" [disabled]="loginForm.invalid" class="btn-anadir">Enviar</button>
    <button type="button" class="btn-eliminar">Cancelar</button>
  </div>

</form>


